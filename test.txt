import requests

def get_test_cases_with_label(project_key, label):
    # JIRA credentials
    username = "your_username"
    password = "your_password"

    # JIRA API endpoint for searching issues
    jira_base_url = "https://your_jira_instance/rest/api/latest"
    search_issues_url = f"{jira_base_url}/search"

    # JQL query to search for issues with the specified label in the given project
    jql_query = f'project = {project_key} AND labels = "{label}"'

    # Request payload for searching issues
    payload = {
        "jql": jql_query,
        "fields": "id"
    }

    # Send POST request to search for issues
    response = requests.post(
        search_issues_url,
        auth=(username, password),
        headers={"Content-Type": "application/json"},
        json=payload
    )

    if response.status_code == 200:
        # Parse the response and extract issue IDs
        issues_data = response.json()["issues"]
        issue_ids = [issue["id"] for issue in issues_data]
        return issue_ids
    else:
        print("Failed to retrieve test cases.")
        return []

# Example usage
project_key = "YOUR_PROJECT_KEY"  # Replace with your JIRA project key
label = "your_label"  # Replace with the specific label you want to filter by

# Get list of test case IDs with the specified label
test_case_ids = get_test_cases_with_label(project_key, label)

# Print the list of test case IDs
print(test_case_ids)
